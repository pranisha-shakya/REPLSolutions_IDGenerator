@model REPLSolutions_IDGenerator.Models.ViewModels.IdCardViewModel

@{
    ViewData["Title"] = "Student ID Card";
}

<h2>Student ID Card</h2>

<div class="card">
    <div class="card-body">
        <h4>@Model.Student.FirstName @Model.Student.LastName</h4>
        <p><strong>Class:</strong> @(Model.Student.Admissions.FirstOrDefault()?.Class?.Name ?? "N/A")</p>
        <p><strong>Roll No:</strong> @(Model.Student.Admissions.FirstOrDefault()?.RollNumber ?? "N/A")</p>
        <p><strong>Date of Birth:</strong> @Model.Student.DateOfBirth.ToString("yyyy-MM-dd")</p>

        <h5>ID Card Preview:</h5>
        <iframe src="data:application/pdf;base64,@Model.PdfBase64" width="100%" height="500px"></iframe>

        <div class="mt-3">
            <a href="@Url.Action("Download", "IdCard", new { studentId = Model.Student.Id })" class="btn btn-primary">
                Download PDF
            </a>
            <button class="btn btn-secondary" onclick="printPDF()">Print ID Card</button>
        </div>
    </div>
</div>

<script>
    function printPDF() {
        var pdfWindow = window.open("");
        pdfWindow.document.write("<iframe width='100%' height='100%' src='data:application/pdf;base64,@Model.PdfBase64'></iframe>");
        pdfWindow.document.close();
        pdfWindow.print();
    }
</script>
